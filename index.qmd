---
title: "Selection Bias & Missing Data Challenge"
subtitle: "Creating a Statistics Meme: Write Your Own Functions"
format:
  html: default
execute:
  echo: false
  eval: true
---

# üé® Selection Bias & Missing Data Challenge

```{python}
#| label: create-meme
#| echo: false
#| include: false

import numpy as np
import matplotlib.pyplot as plt
from step1_prepare_image import prepare_image
from step2_create_stipple import create_stipple
from step3_create_tonal import create_tonal
from step4_create_block_letter import create_block_letter_s
from step5_create_masked import create_masked_stipple
from create_meme import create_statistics_meme

# Load and prepare the image
img_path = 'rohith.jpg'
gray_image = prepare_image(img_path, max_size=512)

# Create stippled image
stipple_pattern, samples = create_stipple(
    gray_image,
    percentage=0.08,
    sigma=0.9,
    content_bias=0.9,
    noise_scale_factor=0.1,
    extreme_downweight=0.5,
    extreme_threshold_low=0.2,
    extreme_threshold_high=0.8,
    extreme_sigma=0.1
)

# Create tonal analysis
grid_rows = 16
grid_cols = 12
tonal_image, average_tones, tonal_stats = create_tonal(
    gray_image,
    grid_rows=grid_rows,
    grid_cols=grid_cols,
    return_full_image=True
)

# Create block letter S
h, w = gray_image.shape
block_letter = create_block_letter_s(h, w, letter="S", font_size_ratio=1.0)

# Create masked stippled image
masked_stipple = create_masked_stipple(
    stipple_pattern,
    block_letter,
    threshold=0.5
)

# Create the final meme
create_statistics_meme(
    original_img=gray_image,
    stipple_img=stipple_pattern,
    block_letter_img=block_letter,
    masked_stipple_img=masked_stipple,
    output_path="statistics_meme.png",
    dpi=150,
    background_color="lightblue"
)
```

## Final Statistics Meme

```{python}
#| label: final-meme
#| echo: false
#| fig-cap: "Statistics meme demonstrating selection bias"

from IPython.display import Image, display
display(Image("statistics_meme.png"))
```

### Explanation

- The meme demonstrates selection bias because only the stippled dots inside the block letter ‚ÄúS‚Äù are shown in the ‚ÄúEstimate‚Äù panel, making that region appear more meaningful or structured than it actually is.

- This selective reveal hides the majority of the stipple pattern, which is visible in the full ‚ÄúYour Model‚Äù panel and shows a much more complex and noisy distribution.

- By focusing on a non-representative subset of the data, the meme shows how selection bias can lead to misleading interpretations that do not reflect the true underlying image.